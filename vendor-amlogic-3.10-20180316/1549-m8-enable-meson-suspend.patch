From e05636fc93c7b5f7bdef807e105eb5af49afe81e Mon Sep 17 00:00:00 2001
From: "qiufang.dai" <qiufang.dai@amlogic.com>
Date: Tue, 29 Oct 2013 18:20:16 +0800
Subject: [PATCH 1549/5965] m8: enable meson suspend

---
 arch/arm/configs/meson8_defconfig    | 60 +++++++---------------------
 arch/arm/mach-meson8/power_suspend.c |  2 +-
 2 files changed, 16 insertions(+), 46 deletions(-)

diff --git a/arch/arm/configs/meson8_defconfig b/arch/arm/configs/meson8_defconfig
index 429e1694ec6e..19f18d411cdd 100755
--- a/arch/arm/configs/meson8_defconfig
+++ b/arch/arm/configs/meson8_defconfig
@@ -1,4 +1,3 @@
-CONFIG_EXPERIMENTAL=y
 CONFIG_KERNEL_LZO=y
 CONFIG_SYSVIPC=y
 CONFIG_NO_HZ=y
@@ -15,7 +14,7 @@ CONFIG_KALLSYMS_ALL=y
 CONFIG_EMBEDDED=y
 CONFIG_MODULES=y
 CONFIG_MODULE_UNLOAD=y
-CONFIG_ARCH_MESON8=y
+CONFIG_MESON_SUSPEND=y
 CONFIG_MESON_LEGACY_REGISTER_API=y
 CONFIG_ARM_ERRATA_751472=y
 CONFIG_ARM_ERRATA_754322=y
@@ -25,12 +24,9 @@ CONFIG_PREEMPT=y
 CONFIG_AEABI=y
 CONFIG_HIGHMEM=y
 # CONFIG_COMPACTION is not set
-#CONFIG_PM_RUNTIME=y
-CONFIG_SYNC=y
 CONFIG_VFP=y
 CONFIG_NEON=y
 CONFIG_BINFMT_MISC=y
-# CONFIG_SUSPEND is not set
 CONFIG_NET=y
 CONFIG_PACKET=y
 CONFIG_PACKET_DIAG=y
@@ -139,27 +135,26 @@ CONFIG_NET_ACT_POLICE=y
 CONFIG_NET_ACT_GACT=y
 CONFIG_NET_ACT_MIRRED=y
 CONFIG_I2C_AML=y
+CONFIG_SARADC_AM=y
 # CONFIG_MESON_INPUT_REMOTE is not set
 CONFIG_NEW_AM_REMOTE=y
+CONFIG_ADC_KEYPADS_AM=y
+CONFIG_MESON_INPUT_TOUCHSCREEN=y
+CONFIG_FOCALTECH_CAPACITIVE_TOUCHSCREEN=y
+CONFIG_GOODIX_GT81XX_CAPACITIVE_TOUCHSCREEN=y
+CONFIG_GSLX680_CAPACITIVE_TOUCHSCREEN=y
+CONFIG_GOODIX_GT9XX_CAPACITIVE_TOUCHSCREEN=y
+CONFIG_TOUCHSCREEN_CT36X=y
+CONFIG_AML_GPIO_KEY=y
 CONFIG_AML_PMU_ALGORITHM_SUPPORT=y
 CONFIG_EFUSE=y
 CONFIG_AMLOGIC_USB=y
-CONFIG_CARDREADER=n
 CONFIG_MMC_AML=y
-CONFIG_MMC_DEBUG=y
+CONFIG_AML_NEXT_GEN_NAND=y
 CONFIG_VSYNC_RDMA=y
-CONFIG_AMAUDIO=y
-CONFIG_AML_AUDIO_DSP=y
 CONFIG_AM_VIDEO=y
 CONFIG_AM_ENCODER=y
 CONFIG_AM_TV_OUTPUT2=y
-CONFIG_AMLOGIC_BACKLIGHT=y
-# CONFIG_AM_NAND is not set
-# CONFIG_AML_NFTL is not set
-# CONFIG_AML_NFTL_NEW is not set
-CONFIG_AML_NEXT_GEN_NAND=y
-CONFIG_AM_GE2D=y
-CONFIG_AM_LOGO=y
 CONFIG_FB_AM=y
 CONFIG_FB_OSD2_CURSOR=y
 CONFIG_FB_OSD2_DEFAULT_WIDTH=32
@@ -167,6 +162,9 @@ CONFIG_FB_OSD2_DEFAULT_HEIGHT=32
 CONFIG_FB_OSD2_DEFAULT_WIDTH_VIRTUAL=32
 CONFIG_FB_OSD2_DEFAULT_HEIGHT_VIRTUAL=32
 CONFIG_AM_FB_EXT=y
+CONFIG_AMLOGIC_BACKLIGHT=y
+CONFIG_AM_GE2D=y
+CONFIG_AM_LOGO=y
 CONFIG_TVIN=y
 CONFIG_TVIN_VDIN=y
 CONFIG_VIUIN=y
@@ -204,10 +202,6 @@ CONFIG_INPUT_MISC=y
 CONFIG_DEVPTS_MULTIPLE_INSTANCES=y
 CONFIG_SPI=y
 CONFIG_MEDIA_SUPPORT=y
-CONFIG_SOUND=y
-CONFIG_SND=y
-CONFIG_SND_SOC=y
-CONFIG_SND_AML_SOC=y
 CONFIG_SND_AML_M_DUMMY_CODEC=y
 CONFIG_SND_AML_M8=y
 CONFIG_UHID=y
@@ -216,8 +210,6 @@ CONFIG_USB_ACM=y
 CONFIG_USB_STORAGE=y
 CONFIG_USB_SERIAL=y
 CONFIG_USB_SERIAL_OPTION=y
-#CONFIG_USB_GADGET=y
-CONFIG_USB_ETH=m
 CONFIG_MMC_DEBUG=y
 CONFIG_UIO=y
 CONFIG_UIO_PDRV=y
@@ -228,6 +220,7 @@ CONFIG_ANDROID_BINDER_IPC=y
 CONFIG_ASHMEM=y
 CONFIG_ANDROID_LOGGER=y
 CONFIG_ANDROID_LOW_MEMORY_KILLER=y
+CONFIG_SYNC=y
 CONFIG_EXT2_FS=y
 CONFIG_EXT3_FS=y
 CONFIG_EXT3_FS_POSIX_ACL=y
@@ -256,30 +249,7 @@ CONFIG_DEBUG_SECTION_MISMATCH=y
 CONFIG_SCHEDSTATS=y
 CONFIG_TIMER_STATS=y
 CONFIG_DEBUG_INFO=y
-CONFIG_CRYPTO_AUTHENC=y
-CONFIG_CRYPTO_CBC=y
-CONFIG_CRYPTO_ECB=y
-CONFIG_CRYPTO_HMAC=y
-CONFIG_CRYPTO_MD5=y
-CONFIG_CRYPTO_SHA1=y
 CONFIG_CRYPTO_SHA256=y
-CONFIG_CRYPTO_AES=y
-CONFIG_CRYPTO_ARC4=y
-CONFIG_CRYPTO_DES=y
-CONFIG_CRYPTO_DEFLATE=y
-CONFIG_CRC_CCITT=y
-CONFIG_CRC16=y
 CONFIG_CRC_T10DIF=y
 CONFIG_CRC7=y
-CONFIG_LIBCRC32C=y
 CONFIG_AVERAGE=y
-CONFIG_MESON_INPUT_TOUCHSCREEN=y
-CONFIG_TOUCHSCREEN_CT36X=y
-CONFIG_GOODIX_GT9XX_CAPACITIVE_TOUCHSCREEN=y
-CONFIG_FOCALTECH_CAPACITIVE_TOUCHSCREEN=y
-CONFIG_GOODIX_GT81XX_CAPACITIVE_TOUCHSCREEN=y
-CONFIG_GSLX680_CAPACITIVE_TOUCHSCREEN=y
-CONFIG_AML_GPIO_KEY=y
-CONFIG_MESON_INPUT_KEYBOARD=y
-CONFIG_SARADC_AM=y
-CONFIG_ADC_KEYPADS_AM=y
diff --git a/arch/arm/mach-meson8/power_suspend.c b/arch/arm/mach-meson8/power_suspend.c
index 651271214aba..08e18e57eb70 100755
--- a/arch/arm/mach-meson8/power_suspend.c
+++ b/arch/arm/mach-meson8/power_suspend.c
@@ -27,7 +27,7 @@
 #include <linux/i2c.h>
 #include <linux/i2c-aml.h>
 #include <mach/power_gate.h>
-#include <linux/aml_bl.h>
+//#include <linux/aml_bl.h>
 #include <linux/delay.h>
 #include <mach/usbclock.h>
 #include <mach/am_regs.h>
-- 
2.19.0

