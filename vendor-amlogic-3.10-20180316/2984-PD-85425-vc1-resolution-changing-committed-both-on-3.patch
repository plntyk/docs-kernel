From 45bcb049dfdd1dd4fbd428a51c22f734410bc99f Mon Sep 17 00:00:00 2001
From: "chen.zhang" <chen.zhang@amlogic.com>
Date: Tue, 14 Jan 2014 16:24:59 +0800
Subject: [PATCH 2984/5965] PD[#85425]vc1 resolution changing, committed both
 on 3.0 and 3.10

---
 .../amports/m8/ucode/vc1/vc1_vc1_linux.h      | 134 +++++++++---------
 drivers/amlogic/amports/vvc1.c                |  13 ++
 2 files changed, 78 insertions(+), 69 deletions(-)

diff --git a/drivers/amlogic/amports/m8/ucode/vc1/vc1_vc1_linux.h b/drivers/amlogic/amports/m8/ucode/vc1/vc1_vc1_linux.h
index 8434499a09a4..2f4c9c61eb86 100755
--- a/drivers/amlogic/amports/m8/ucode/vc1/vc1_vc1_linux.h
+++ b/drivers/amlogic/amports/m8/ucode/vc1/vc1_vc1_linux.h
@@ -1,34 +1,34 @@
 const unsigned MicroCode[] = {
-0x06810001,0x06800000,0x0d000001,0x07400040,0x0c014380,0x06800024,
+0x06810001,0x06800000,0x0d000001,0x07400040,0x0c014680,0x06800024,
 0x00000000,0x00000000,0x080c0002,0x080c1e01,0x06bfde80,0x07c017c0,
-0x06030400,0x00400000,0x0c015240,0x00000000,0x00000000,0x00000000,
+0x06030400,0x00400000,0x0c015540,0x00000000,0x00000000,0x00000000,
 0x00000000,0x00000000,0x0c7ffe80,0x00000000,0x00000000,0x00000000,
 0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,0x00000000,
 0x00000000,0x00000000,0x0cc00000,0x00400000,0x0cc00000,0x00400000,
-0x0c780580,0x064c0007,0x0c7953c0,0x06800024,0x0cc00000,0x00400000,
-0x0cc00000,0x00400000,0x0cc00000,0x00400000,0x0c79e100,0x00000000,
+0x0c780580,0x064c0007,0x0c7956c0,0x06800024,0x0cc00000,0x00400000,
+0x0cc00000,0x00400000,0x0cc00000,0x00400000,0x0c79e400,0x00000000,
 0x0cc00000,0x00400000,0x04001924,0x0c7fff40,0x0609c724,0x06800024,
 0x00800000,0x078017c9,0x0c7ffe00,0x06030409,0x06bfdd89,0x06030409,
-0x00400000,0x0a2e0047,0x07801509,0x0aa14009,0x0a608049,0x0c78fa80,
+0x00400000,0x0a2e0047,0x07801509,0x0aa14009,0x0a608049,0x0c78fc00,
 0x0a608089,0x0c78ed40,0x0a220807,0x0c787d40,0x00000000,0x06800007,
-0x0c0067c0,0x07c003c7,0x0c792e80,0x00000000,0x0bee9007,0x078003c7,
+0x0c0067c0,0x07c003c7,0x0c793180,0x00000000,0x0bee9007,0x078003c7,
 0x0a6fc007,0x06800008,0x07800007,0x0a644007,0x07c00208,0x064c2907,
 0x091c11c7,0x0a634047,0x07800347,0x0a22d007,0x0aa20020,0x0aa0c0a0,
 0x07802987,0x0a60c0c8,0x078000c7,0x0a614007,0x07800107,0x0a60c007,
-0x0c792900,0x00000000,0x0cb8002d,0x00000000,0x07800087,0x060c2307,
+0x0c792c00,0x00000000,0x0cb8002d,0x00000000,0x07800087,0x060c2307,
 0x06800007,0x07c00147,0x04c001c7,0x060c2107,0x068fdfca,0x064e0408,
 0x02808288,0x02c08948,0x060e0408,0x060c0726,0x06800008,0x07800507,
 0x09582207,0x098083c8,0x06c00308,0x060e0508,0x080c25a0,0x080c2601,
-0x078020c8,0x0a6100c8,0x080c2602,0x080c2603,0x080c2604,0x0c01ca80,
-0x080c260e,0x0c01c1c0,0x00000000,0x0683ffc8,0x064c2307,0x093041c7,
+0x078020c8,0x0a6100c8,0x080c2602,0x080c2603,0x080c2604,0x0c01cd80,
+0x080c260e,0x0c01c4c0,0x00000000,0x0683ffc8,0x064c2307,0x093041c7,
 0x0aa0c007,0x0b6f4048,0x04401208,0x07800007,0x040011c7,0x07c00007,
 0x09c253a5,0x07800988,0x0b405207,0x040011c7,0x0b824207,0x0c7808c0,
 0x098251e5,0x06800007,0x07c00007,0x098253a5,0x09c253e5,0x09c251e5,
 0x078016c8,0x04001208,0x078009c9,0x0b410248,0x07c016c8,0x0be5c7c8,
-0x078000c7,0x0aa0c007,0x0c020a40,0x0680000a,0x07800107,0x0aa0c007,
-0x0c020940,0x0680004a,0x07800bc7,0x0aa34007,0x0c020840,0x0680008a,
+0x078000c7,0x0aa0c007,0x0c020d40,0x0680000a,0x07800107,0x0aa0c007,
+0x0c020c40,0x0680004a,0x07800bc7,0x0aa34007,0x0c020b40,0x0680008a,
 0x0c780280,0x078003c7,0x0a6fc007,0x00000000,0x06430507,0x0a2f0107,
-0x06a00008,0x060c3d08,0x0c791500,0x00000000,0x07800007,0x09508987,
+0x06a00008,0x060c3d08,0x0c791800,0x00000000,0x07800007,0x09508987,
 0x078016c9,0x09408989,0x0680000b,0x0481f249,0x05403249,0x07800007,
 0x0480f207,0x068003ca,0x0240a20a,0x058041c7,0x020091c9,0x06804007,
 0x020091c9,0x078000c7,0x0a60c007,0x07000247,0x06800007,0x03807287,
@@ -43,8 +43,8 @@ const unsigned MicroCode[] = {
 0x04c00208,0x0be64207,0x060c2108,0x07800248,0x0aa20008,0x00000000,
 0x080c2590,0x080c2607,0x080c2601,0x080c2604,0x0c780180,0x080c2602,
 0x080c2500,0x080c2607,0x080c2604,0x080c2602,0x07802c08,0x04c28208,
-0x09808208,0x060c2108,0x0c01a740,0x080c260e,0x0c019e80,0x00000000,
-0x0c7fdd00,0x00000000,0x0c7ffd80,0x080c2560,0x0c78fc80,0x00000000,
+0x09808208,0x060c2108,0x0c01aa40,0x080c260e,0x0c01a180,0x00000000,
+0x0c7fdd00,0x00000000,0x0c7ffd80,0x080c2560,0x0c78ff80,0x00000000,
 0x06800048,0x07c00148,0x04c00208,0x0be68207,0x07800207,0x0aae4047,
 0x060c2108,0x080c2560,0x0683ffc9,0x064c2307,0x09304207,0x0aa10008,
 0x091421c7,0x0b6f0049,0x04401249,0x0be1c087,0x06800008,0x060c2b08,
@@ -67,8 +67,8 @@ const unsigned MicroCode[] = {
 0x00000000,0x064c2307,0x09181207,0x0aa6c008,0x06800048,0x07c00148,
 0x04c00208,0x0be20207,0x07800207,0x0aa4c047,0x060c2108,0x080c2500,
 0x080c2607,0x0c780140,0x080c2604,0x060c2108,0x080c2b00,0x080c2560,
-0x07802c08,0x04c28208,0x09808208,0x060c2108,0x0c0182c0,0x080c260e,
-0x0c017a00,0x00000000,0x0c7fb880,0x00000000,0x0c78d880,0x00000000,
+0x07802c08,0x04c28208,0x09808208,0x060c2108,0x0c0185c0,0x080c260e,
+0x0c017d00,0x00000000,0x0c7fb880,0x00000000,0x0c78db80,0x00000000,
 0x07800208,0x0aaf4048,0x06800048,0x07c00148,0x04c00208,0x0be20207,
 0x060c2108,0x080c2560,0x080c2609,0x080c2602,0x080c2601,0x0c7ffa40,
 0x080c2604,0x080c2b00,0x0c7ff980,0x080c2560,0x07800087,0x060c2307,
@@ -76,7 +76,7 @@ const unsigned MicroCode[] = {
 0x060c0227,0x060c032e,0x06800008,0x07800507,0x09582207,0x098083c8,
 0x06c00308,0x060e0508,0x080c2540,0x080c2606,0x064c2307,0x093041c7,
 0x0a6f8007,0x00000000,0x064c2307,0x0a228107,0x091421c7,0x068000c8,
-0x07c00148,0x04c00208,0x080c2570,0x0c7fcb00,0x080c260a,0x0c78cc40,
+0x07c00148,0x04c00208,0x080c2570,0x0c7fcb00,0x080c260a,0x0c78cf40,
 0x00000000,0x07800208,0x0aaf4048,0x06800048,0x07c00148,0x04c00208,
 0x0be20047,0x060c2108,0x080c2570,0x080c2607,0x080c2602,0x080c2601,
 0x0c7fee00,0x080c2604,0x080c2530,0x080c2607,0x080c2602,0x0c7fc840,
@@ -98,13 +98,13 @@ const unsigned MicroCode[] = {
 0x0980a20a,0x0980a00a,0x060c000a,0x064c080a,0x0980a34a,0x060c080a,
 0x0c07f580,0x00000000,0x080e1600,0x0680000a,0x07c003ca,0x07800647,
 0x0aa20007,0x00000000,0x0fc08280,0x06801007,0x07c00347,0x06809409,
-0x0c781580,0x060c0809,0x064c1a07,0x0b210007,0x06800008,0x0c78ab40,
+0x0c781580,0x060c0809,0x064c1a07,0x0b210007,0x06800008,0x0c78ae40,
 0x00000000,0x0fc08280,0x0fc081c0,0x07c00347,0x020081c8,0x0a20d007,
 0x06800409,0x06809409,0x060c0809,0x0fc081c0,0x020081c8,0x05410247,
 0x0fc081c0,0x0a646207,0x020081c8,0x0fc081c0,0x020081c8,0x09508247,
 0x0fc081c0,0x020081c8,0x09408247,0x07c02e09,0x058101c9,0x07c02f07,
 0x04010249,0x05403249,0x060c1a09,0x0fc081c0,0x0aa1a207,0x020081c8,
-0x07802007,0x060c0807,0x0c78a300,0x060c1a1f,0x0fc081c0,0x020081c8,
+0x07802007,0x060c0807,0x0c78a600,0x060c1a1f,0x0fc081c0,0x020081c8,
 0x05408247,0x0fc081c0,0x020081c8,0x09408247,0x07c02049,0x0fc081c0,
 0x0a6d2207,0x020081c8,0x0fc081c0,0x020081c8,0x05408247,0x0fc081c0,
 0x020081c8,0x09408247,0x07c02089,0x0fc081c0,0x0a6aa207,0x020081c8,
@@ -113,9 +113,9 @@ const unsigned MicroCode[] = {
 0x0fc081c0,0x0aa36207,0x0c7ff680,0x06800047,0x07c01407,0x07802507,
 0x0aa0c047,0x06800087,0x06800047,0x07c024c7,0x06800047,0x0c783000,
 0x07c004c7,0x0c782480,0x0aa4c3ca,0x0aaf838a,0x0aacc30a,0x0a61034a,
-0x06800007,0x0c782e00,0x07c004c7,0x0a6082ca,0x0c788a80,0x0a62040a,
+0x06800007,0x0c782e00,0x07c004c7,0x0a6082ca,0x0c788d80,0x0a62040a,
 0x00000000,0x0fc101c0,0x07c02107,0x07c02187,0x0fc101c0,0x0c780100,
-0x07c021c7,0x0c7892c0,0x00000000,0x06800047,0x07c00447,0x06800007,
+0x07c021c7,0x0c7895c0,0x00000000,0x06800047,0x07c00447,0x06800007,
 0x07c00247,0x0fc02280,0x07c020ca,0x054011ca,0x04c011c7,0x060c1e07,
 0x0aa140ca,0x00000000,0x0fc021c0,0x0c780100,0x00000000,0x0fc031c0,
 0x0fc021c0,0x0fc031c0,0x0fc051c0,0x0aa0c0ca,0x0c781380,0x00000000,
@@ -131,58 +131,60 @@ const unsigned MicroCode[] = {
 0x04001247,0x0c7801c0,0x0680080a,0x0fc081c0,0x0fc041c0,0x0aa0c047,
 0x0680fa0a,0x0680fa4a,0x0fc011c0,0x0aa14007,0x00000000,0x0fc081c0,
 0x0fc081c0,0x0fc081c0,0x0fc011c0,0x0a60c007,0x0c7800c0,0x06800008,
-0x0fc05200,0x07c02348,0x0c787a80,0x00000000,0x0fc011c0,0x07c00047,
+0x0fc05200,0x07c02348,0x0c787d80,0x00000000,0x0fc011c0,0x07c00047,
 0x0fc011c0,0x0fc011c0,0x07c02d07,0x0fc011c0,0x0fc011c0,0x07c02c47,
 0x0fc011c0,0x07c02907,0x0fc021c0,0x07c023c7,0x0fc011c0,0x07c02b87,
 0x0fc011c0,0x0fc011c0,0x07c02447,0x0fc011c0,0x07c02d47,0x0fc011c0,
 0x07c02d87,0x0fc031c0,0x07c02dc7,0x0fc021c0,0x07c02407,0x0fc011c0,
-0x07c022c7,0x0c787340,0x0fc011c0,0x0fc011c0,0x0fc011c0,0x0fc011c0,
+0x07c022c7,0x0c787640,0x0fc011c0,0x0fc011c0,0x0fc011c0,0x0fc011c0,
 0x07c02387,0x0fc011c0,0x07c00447,0x0fc011c0,0x07c00047,0x0fc011c0,
 0x07c02c47,0x0fc011c0,0x07c02907,0x0fc021c0,0x07c023c7,0x0fc011c0,
 0x07c02b87,0x0fc011c0,0x07c02447,0x0fc021c0,0x07c02407,0x07802348,
 0x0aa14008,0x00000000,0x0fc081c0,0x0aefc048,0x04401208,0x0fc011c0,
 0x0aa28007,0x00000000,0x0fc0c1c0,0x040011c7,0x054011c7,0x07c02187,
 0x0fc0c1c0,0x040011c7,0x054011c7,0x07c021c7,0x07802907,0x0aa0c007,
-0x06800007,0x0fc011c0,0x07c00a07,0x0c786840,0x00000000,0x06800048,
+0x06800007,0x0fc011c0,0x07c00a07,0x0c786b40,0x00000000,0x06800048,
 0x07c01408,0x064c510a,0x064c4607,0x078007c8,0x05410208,0x07800789,
 0x02008248,0x0580a208,0x0e000288,0x00000000,0x00000000,0x00000000,
 0x0f000200,0x0f010280,0x0970820a,0x0540a208,0x020081c8,0x064c430a,
 0x02408288,0x064c400a,0x02408288,0x07c00808,0x05810208,0x07c00848,
 0x07801347,0x040011c7,0x07c01347,0x06bff127,0x06fff127,0x06800026,
 0x07c00026,0x07c016e6,0x098253a6,0x098253e5,0x09c251e5,0x07802187,
-0x0a608007,0x0c785e40,0x0400f1c7,0x058041c7,0x05404b87,0x04401bae,
+0x0a608007,0x0c786140,0x0400f1c7,0x058041c7,0x05404b87,0x04401bae,
 0x05402bae,0x060c0907,0x07c00987,0x04401247,0x07c00609,0x09708989,
-0x05404287,0x078021c8,0x0a608008,0x0c785ac0,0x0400f208,0x05804208,
+0x05404287,0x078021c8,0x0a608008,0x0c785dc0,0x0400f208,0x05804208,
 0x05404248,0x04401249,0x05402249,0x09610b89,0x07c009c8,0x04401248,
 0x09608989,0x04000248,0x09610247,0x06095209,0x05404208,0x078020c7,
 0x0a6100c7,0x00000000,0x0780218a,0x078021c8,0x0961020a,0x06090808,
 0x06800007,0x07c00507,0x06800047,0x07c00587,0x07800607,0x040011c7,
-0x07c005c7,0x078020c7,0x0aa080c7,0x0c784400,0x078004c7,0x0a624007,
-0x078003a0,0x0c01ff80,0x00000000,0x0c01f280,0x00000000,0x0aa14008,
-0x0c785100,0x00000000,0x0c020180,0x00000000,0x078024c8,0x05406208,
+0x07c005c7,0x078020c7,0x0aa080c7,0x0c784700,0x078004c7,0x0a624007,
+0x078003a0,0x0c020280,0x00000000,0x0c01f580,0x00000000,0x0aa14008,
+0x0c785400,0x00000000,0x0c020480,0x00000000,0x078024c8,0x05406208,
 0x07800247,0x09482207,0x09403220,0x060c0408,0x0687c008,0x0580c1e3,
-0x02008207,0x07c00288,0x0c005540,0x07c013e0,0x0c014a80,0x06800008,
+0x02008207,0x07c00288,0x0c005840,0x07c013e0,0x0c014d80,0x06800008,
 0x06a00008,0x07802c87,0x09610207,0x060c3d08,0x064c3d08,0x09161208,
 0x0a6f8008,0x078002c8,0x0aa14008,0x06bfffc8,0x060c3908,0x0c780480,
 0x060c3808,0x06800008,0x06c07e08,0x078004c9,0x0aa10009,0x06a00009,
 0x06c00009,0x02008248,0x0aa180a0,0x020088c8,0x060c3808,0x06bfffc8,
-0x0c780140,0x060c3908,0x060c3908,0x06bfffc8,0x060c3808,0x0c0062c0,
-0x00000000,0x0c0206c0,0x00000000,0x080e1600,0x078004c7,0x0aa0c007,
-0x0c782540,0x00000000,0x0649c909,0x0aa10009,0x06800087,0x0c7f0e80,
-0x07c01507,0x07801487,0x0a608007,0x0c780b00,0x044011c7,0x0aa0c087,
-0x07801549,0x078015c9,0x0b20c0c9,0x00000000,0x0c780940,0x0649c808,
+0x0c780140,0x060c3908,0x060c3908,0x06bfffc8,0x060c3808,0x0c0065c0,
+0x00000000,0x0c0209c0,0x00000000,0x080e1600,0x078004c7,0x0aa0c007,
+0x0c782840,0x00000000,0x0649c909,0x0aa10009,0x06800087,0x0c7f0e80,
+0x07c01507,0x07801487,0x0a608007,0x0c780c80,0x044011c7,0x0aa0c087,
+0x07801549,0x078015c9,0x0b20c0c9,0x00000000,0x0c780ac0,0x0649c808,
 0x0aa14008,0x078014c7,0x02807207,0x07c014c7,0x0809c800,0x040301c9,
 0x070001c7,0x054101c7,0x04034209,0x07000208,0x094101c8,0x0609cb07,
 0x040441c9,0x070001c7,0x054101c7,0x04040209,0x07000208,0x094101c8,
-0x0609cc07,0x040381c9,0x070001c7,0x07800fc8,0x020081c8,0x0609ca08,
+0x0609cc07,0x040621c9,0x070001c7,0x0609d307,0x040661c9,0x070001c7,
+0x0609d407,0x040381c9,0x070001c7,0x07800fc8,0x020081c8,0x0609ca08,
 0x07c00fdf,0x04029209,0x04001249,0x07000208,0x09464248,0x07801808,
 0x094e1248,0x0609c909,0x08007401,0x06800009,0x07c01489,0x06800009,
 0x07c01509,0x078014c7,0x02c07247,0x04000294,0x0a238047,0x06800008,
 0x0400029b,0x0a22c087,0x06800048,0x0400029c,0x0a220107,0x06800088,
-0x0400029d,0x0a214207,0x068000c8,0x06800047,0x0c7efe40,0x07c01507,
+0x0400029d,0x0a214207,0x068000c8,0x06800047,0x0c7efcc0,0x07c01507,
 0x07801607,0x090041c7,0x0a8071c8,0x078002c7,0x0aa08047,0x0a6200a0,
 0x07801607,0x090841c7,0x0a4051c8,0x06800047,0x03407207,0x0c7ff900,
 0x02c091c9,0x07800807,0x04040248,0x07400247,0x07800847,0x04004249,
+0x07400247,0x07802187,0x04062248,0x07400247,0x078021c7,0x04066248,
 0x07400247,0x07801847,0x054031c7,0x02c07807,0x04029248,0x07400247,
 0x040301c8,0x07800f49,0x074001c9,0x040341c8,0x07800f09,0x0a60c060,
 0x074001c9,0x04000848,0x0a6200a0,0x040381c8,0x074001df,0x07000889,
@@ -202,20 +204,20 @@ const unsigned MicroCode[] = {
 0x06804eed,0x064c1e07,0x04c181c7,0x060c1e07,0x0c003340,0x00000000,
 0x0c01d840,0x00000000,0x064c1e08,0x07800247,0x0a618087,0x09c08408,
 0x07800547,0x0a60c007,0x00000000,0x09808408,0x060c1e08,0x0c01dcc0,
-0x00000000,0x0c01f800,0x00000000,0x0cb8002d,0x00000000,0x07800347,
+0x00000000,0x0c01ee40,0x00000000,0x0cb8002d,0x00000000,0x07800347,
 0x0be19007,0x07802e07,0x07802f08,0x096101c8,0x0ae08047,0x0c780dc0,
 0x078022c7,0x0aa0c007,0x00000000,0x0fc011c0,0x0fc021c0,0x07802d87,
-0x0aa0c007,0x06800208,0x0fc011c0,0x07c02e47,0x0c7fb940,0x00000000,
+0x0aa0c007,0x06800208,0x0fc011c0,0x07c02e47,0x0c7fb640,0x00000000,
 0x06800007,0x07c01407,0x078001c7,0x0a60c007,0x0c780980,0x00000000,
 0x0fc091c0,0x078024c8,0x0a60c088,0x078009c8,0x02407207,0x078016c8,
 0x0a802207,0x07c016c7,0x0fc011c0,0x0aa50007,0x0c01b3c0,0x00000000,
 0x078004c7,0x0aa18007,0x07802507,0x0aa0c047,0x06800087,0x06800047,
 0x07c024c7,0x0c01a500,0x00000000,0x078004c7,0x0aa0c007,0x00000000,
 0x078003a0,0x0aa08008,0x0c780280,0x0c00ffc0,0x06800048,0x098253a5,
-0x098253e5,0x09c251e5,0x0c7fec40,0x00000000,0x0c7ed100,0x00000000,
+0x098253e5,0x09c251e5,0x0c7fec40,0x00000000,0x0c7ece00,0x00000000,
 0x0683ffc9,0x04401249,0x0aaf0009,0x064c0007,0x0a2f4047,0x00000000,
 0x064c3a07,0x090061c7,0x0aae4647,0x00000000,0x080c2800,0x080c0002,
-0x0c7ec940,0x00000000,0x06b21000,0x07c01440,0x0649c014,0x0649c11b,
+0x0c7ec640,0x00000000,0x06b21000,0x07c01440,0x0649c014,0x0649c11b,
 0x0649c21c,0x0649c31d,0x0680402b,0x0681412c,0x0c000440,0x00000000,
 0x08002501,0x08002605,0x08002708,0x08002815,0x08002c14,0x0cc00000,
 0x00000000,0x06800007,0x07c000c7,0x07c00107,0x07c00bc7,0x07c00207,
@@ -230,9 +232,9 @@ const unsigned MicroCode[] = {
 0x0aa30003,0x00000000,0x00800000,0x0649c803,0x0a60c003,0x0c7801c0,
 0x00400000,0x078014c2,0x028020c2,0x07c014c2,0x0809c800,0x00400000,
 0x07801502,0x0aa0c002,0x06800102,0x06030502,0x0b60c224,0x0cc00000,
-0x00000000,0x00800000,0x00000000,0x06800007,0x0c071e40,0x07c003c7,
+0x00000000,0x00800000,0x00000000,0x06800007,0x0c071b40,0x07c003c7,
 0x080c2800,0x080c0002,0x06800024,0x0cc00000,0x00400000,0x064c441a,
-0x0912169a,0x0aaf801a,0x0c7eae00,0x00000000,0x0683ffe9,0x04401a69,
+0x0912169a,0x0aaf801a,0x0c7eab00,0x00000000,0x0683ffe9,0x04401a69,
 0x0aa0c029,0x0649092a,0x0bef406a,0x0cc00000,0x00000000,0x0c07fe40,
 0x00000000,0x06800168,0x0649072a,0x09503aa8,0x07800328,0x09421aa8,
 0x07800268,0x0aa0c0a8,0x0982a0ea,0x09c2a0ea,0x078029a8,0x0a60c028,
@@ -519,30 +521,24 @@ const unsigned MicroCode[] = {
 0x09c28068,0x06095028,0x068c0028,0x06c07e68,0x020288e8,0x06097d28,
 0x06980028,0x06d00028,0x06097e28,0x06a20928,0x06c00228,0x07800269,
 0x0a61c069,0x00000000,0x09828028,0x078009a9,0x06498e2a,0x097c1aa9,
-0x06098e2a,0x06095128,0x0cc00000,0x00000000,0x08098002,0x078024c7,
-0x0a6440c7,0x00000000,0x0541022b,0x05810248,0x02c08248,0x06098108,
-0x0541022c,0x05810248,0x02c08248,0x06098208,0x080980f0,0x078024c7,
-0x0aa640c7,0x00000000,0x080980f4,0x0c780580,0x00000000,0x078004c7,
-0x0aac0007,0x00000000,0x0541022b,0x0649b109,0x05410249,0x078024c7,
-0x0a614047,0x00000000,0x05810208,0x0c7800c0,0x00000000,0x05810249,
-0x02c08248,0x06098108,0x0541022c,0x05810248,0x02c08248,0x06098208,
-0x080980f4,0x0649b107,0x06099207,0x078024c7,0x0a6100c7,0x0609902b,
-0x0c780140,0x0609912c,0x0609902b,0x0c780080,0x0609912c,0x0aa0c0a0,
-0x0aa0c060,0x0cc00000,0x0c7809c0,0x078024c7,0x06985808,0x0aa300c7,
-0x06d81848,0x07800548,0x0a664008,0x07800888,0x0aa24008,0x06901008,
-0x0aa6c087,0x06d01008,0x06880808,0x0c780600,0x06c80808,0x0c780580,
-0x00000000,0x07802508,0x0aa1c048,0x06881088,0x0aa44047,0x06d08808,
-0x06885048,0x0c780380,0x06c81008,0x06900888,0x0aa2c087,0x06c89008,
-0x06904848,0x0c780200,0x06d00808,0x06889008,0x0aa14087,0x06d00888,
-0x06889088,0x0c780080,0x06c81008,0x0cc00000,0x060c0f08,0x078024c7,
-0x06985808,0x0aa400c7,0x06d81848,0x07802508,0x0aa1c048,0x06885048,
-0x0aa2c047,0x06c81088,0x06904848,0x0c780200,0x06d00808,0x06904848,
-0x0aa14087,0x06d00888,0x06885048,0x0c780080,0x06c81008,0x0cc00000,
-0x060c0f08,0x0680400a,0x06c0008a,0x0681410b,0x06c0018b,0x0682420c,
-0x06c0028c,0x07800247,0x0aa0c007,0x06800008,0x06800048,0x06499207,
-0x0780130d,0x0a80a287,0x09404348,0x0780130d,0x0a8072c7,0x09484348,
-0x0780130d,0x0a804307,0x09504348,0x0780130d,0x09584348,0x07c0130d,
-0x05402208,0x06499007,0x0a807287,0x0900438d,0x0a8052c7,0x0908438d,
-0x0a803307,0x0910438d,0x0918438d,0x0940120e,0x06499107,0x0a807287,
+0x06098e2a,0x06095128,0x0cc00000,0x00000000,0x0649b107,0x06099207,
+0x078024c7,0x0a6100c7,0x0609902b,0x0c780140,0x0609912c,0x0609902b,
+0x0c780080,0x0609912c,0x0aa0c0a0,0x0aa0c060,0x0cc00000,0x0c7809c0,
+0x078024c7,0x06985808,0x0aa300c7,0x06d81848,0x07800548,0x0a664008,
+0x07800888,0x0aa24008,0x06901008,0x0aa6c087,0x06d01008,0x06880808,
+0x0c780600,0x06c80808,0x0c780580,0x00000000,0x07802508,0x0aa1c048,
+0x06881088,0x0aa44047,0x06d08808,0x06885048,0x0c780380,0x06c81008,
+0x06900888,0x0aa2c087,0x06c89008,0x06904848,0x0c780200,0x06d00808,
+0x06889008,0x0aa14087,0x06d00888,0x06889088,0x0c780080,0x06c81008,
+0x0cc00000,0x060c0f08,0x078024c7,0x06985808,0x0aa400c7,0x06d81848,
+0x07802508,0x0aa1c048,0x06885048,0x0aa2c047,0x06c81088,0x06904848,
+0x0c780200,0x06d00808,0x06904848,0x0aa14087,0x06d00888,0x06885048,
+0x0c780080,0x06c81008,0x0cc00000,0x060c0f08,0x0680400a,0x06c0008a,
+0x0681410b,0x06c0018b,0x0682420c,0x06c0028c,0x07800247,0x0aa0c007,
+0x06800008,0x06800048,0x06499207,0x0780130d,0x0a80a287,0x09404348,
+0x0780130d,0x0a8072c7,0x09484348,0x0780130d,0x0a804307,0x09504348,
+0x0780130d,0x09584348,0x07c0130d,0x05402208,0x06499007,0x0a807287,
 0x0900438d,0x0a8052c7,0x0908438d,0x0a803307,0x0910438d,0x0918438d,
-0x0942120e,0x064c180e,0x09484388,0x0cc00000,0x060c180e};
+0x0940120e,0x06499107,0x0a807287,0x0900438d,0x0a8052c7,0x0908438d,
+0x0a803307,0x0910438d,0x0918438d,0x0942120e,0x064c180e,0x09484388,
+0x0cc00000,0x060c180e};
diff --git a/drivers/amlogic/amports/vvc1.c b/drivers/amlogic/amports/vvc1.c
index ae26a7c509f6..9b14d9f5f867 100755
--- a/drivers/amlogic/amports/vvc1.c
+++ b/drivers/amlogic/amports/vvc1.c
@@ -246,10 +246,23 @@ static irqreturn_t vvc1_isr(int irq, void *dev_id)
     u32 picture_type;
     u32 buffer_index;
     unsigned int pts, pts_valid = 0, offset;
+    u32 v_width, v_height;
 
     reg = READ_VREG(VC1_BUFFEROUT);
 
     if (reg) {
+        v_width = READ_VREG(AV_SCRATCH_J);
+        v_height = READ_VREG(AV_SCRATCH_K);
+        
+        if (v_width != vvc1_amstream_dec_info.width) {
+            printk("frame width changed %d to %d\n", vvc1_amstream_dec_info.width, v_width);
+            vvc1_amstream_dec_info.width = v_width;
+        }
+        if (v_height != vvc1_amstream_dec_info.height) {
+            printk("frame height changed %d to %d\n", vvc1_amstream_dec_info.height, v_height);
+            vvc1_amstream_dec_info.height = v_height;
+        } 
+        
         if (pts_by_offset) {
             offset = READ_VREG(VC1_OFFSET_REG);
             if (pts_lookup_offset(PTS_TYPE_VIDEO, offset, &pts, 0) == 0) {
-- 
2.19.0

